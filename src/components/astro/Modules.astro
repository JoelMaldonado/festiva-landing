---
import CardModule from "../ui/CardModule.astro";
import TitlePill from "../ui/TitlePill.astro";

const modules = [
  {
    title: "Home",
    description:
      "Access a smart dashboard that shows everything â€” from upcoming events to featured artists",
    image: "/images/mockup1.png",
  },
  {
    title: "Events",
    description:
      "Promote your upcoming events to build an engaged and active community",
    image: "/images/mockup1.png",
  },
  {
    title: "Event Details",
    description:
      "Share detailed information about each event so your audience knows exactly what to expect",
    image: "/images/mockup1.png",
  },
];
---

<section id="modules" class="relative p-20">
  <div class="px-6 mx-auto text-center max-w-7xl">
    <TitlePill label="Modules" />

    <h2 class="mt-4 text-3xl font-black text-white md:text-4xl">
      One App, Endless Ways to Own the Night
    </h2>
  </div>

  <div
    class="flex gap-6 px-6 mt-12 overflow-x-auto no-scrollbar scroll-smooth snap-x snap-mandatory"
    data-carousel
  >
    {
      modules.map((module) => (
        <CardModule
          title={module.title}
          description={module.description}
          image={module.image}
        />
      ))
    }
  </div>
</section>

<script is:inline>
  const carousel = document.querySelector("[data-carousel]");
  let scrollAmount = 0;
  const itemWidth = 300 + 24; // 300px de la tarjeta + 24px del gap
  let interval;

  function autoScrollCarousel() {
    scrollAmount += itemWidth;
    carousel.scrollTo({ left: scrollAmount, behavior: "smooth" });

    if (scrollAmount >= carousel.scrollWidth - carousel.clientWidth) {
      setTimeout(() => {
        scrollAmount = 0;
        carousel.scrollTo({ left: 0 });
      }, 600);
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    interval = setInterval(autoScrollCarousel, 3000);
  });
</script>
