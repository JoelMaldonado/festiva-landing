---
import CardModule from "./ui/CardModule.astro";
import TitlePill from "./ui/TitlePill.astro";

const modules = [
  {
    title: "Home",
    description:
      "Un panel completo que visibiliza todo en una sola pantalla, desde eventos hasta artistas",
    image: "/images/mockup1.png",
  },
  {
    title: "Eventos",
    description:
      "Visibiliza tus eventos más cercanos para mantener una comunidad activa e informada",
    image: "/images/mockup1.png",
  },
  {
    title: "Detalle de Eventos",
    description:
      "Comparte detalles específicos de tus eventos para tu público objetivo",
    image: "/images/mockup1.png",
  },
  {
    title: "Home",
    description:
      "Un panel completo que visibiliza todo en una sola pantalla, desde eventos hasta artistas",
    image: "/images/mockup1.png",
  },
  {
    title: "Eventos",
    description:
      "Visibiliza tus eventos más cercanos para mantener una comunidad activa e informada",
    image: "/images/mockup1.png",
  },
  {
    title: "Detalle de Eventos",
    description:
      "Comparte detalles específicos de tus eventos para tu público objetivo",
    image: "/images/mockup1.png",
  },
];
---

<section id="modules" class="relative p-20">
  <div class="px-6 mx-auto text-center max-w-7xl">
    <TitlePill label="Módulos" />

    <h2 class="mt-4 text-3xl font-black text-white md:text-4xl">
      UNA APP, MÚLTIPLES FORMAS DE VIVIR LA NOCHE
    </h2>
  </div>

  <div
    class="flex gap-6 px-6 mt-12 overflow-x-auto no-scrollbar scroll-smooth snap-x snap-mandatory"
    data-carousel
  >
    {
      modules.map((module) => (
        <CardModule
          title={module.title}
          description={module.description}
          image={module.image}
        />
      ))
    }
  </div>
</section>

<script is:inline>
  const carousel = document.querySelector("[data-carousel]");
  let scrollAmount = 0;
  const itemWidth = 300 + 24; // 300px de la tarjeta + 24px del gap
  let interval;

  function autoScrollCarousel() {
    scrollAmount += itemWidth;
    carousel.scrollTo({ left: scrollAmount, behavior: "smooth" });

    if (scrollAmount >= carousel.scrollWidth - carousel.clientWidth) {
      setTimeout(() => {
        scrollAmount = 0;
        carousel.scrollTo({ left: 0 });
      }, 600);
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    interval = setInterval(autoScrollCarousel, 3000);
  });
</script>
